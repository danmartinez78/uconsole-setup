set $mod Mod1
font pango:JetBrainsMono Nerd Font 10
set $term kitty

# Gaps / behavior
gaps inner 6
gaps outer 6
smart_gaps on
smart_borders on

# Autostart
exec --no-startup-id nm-tray
exec --no-startup-id blueman-applet
exec --no-startup-id udiskie --tray
exec --no-startup-id feh --bg-fill ~/Pictures/wallpapers/current.jpg
exec --no-startup-id picom --experimental-backends --no-fading-openclose --no-fading-destroyed-argb
exec --no-startup-id xset s off -dpms
exec --no-startup-id xrdb -merge ~/.Xresources

# Apps / launcher
#bindsym $mod+Return exec $term
bindsym $mod+Return exec --no-startup-id ~/.local/bin/i3-smart-tiling.sh
bindsym $mod+BackSpace kill
bindsym $mod+Shift+r restart
bindsym $mod+d exec rofi -show drun -theme ~/.config/rofi/dracula.rasi
bindsym $mod+Tab exec rofi -show window -theme ~/.config/rofi/dracula.rasi
bindsym $mod+p exec pavucontrol

# Focus (hjkl + arrows)
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right

# Move windows
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

# Layout
bindsym $mod+v split v
bindsym $mod+b split h
bindsym $mod+f fullscreen toggle
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+space focus mode_toggle
bindsym $mod+Shift+space floating toggle

# Resize mode
mode "resize" {
  bindsym h resize shrink width 5 px or 5 ppt
  bindsym j resize grow height 5 px or 5 ppt
  bindsym k resize shrink height 5 px or 5 ppt
  bindsym l resize grow width 5 px or 5 ppt
  bindsym Left  resize shrink width 5 px or 5 ppt
  bindsym Down  resize grow height 5 px or 5 ppt
  bindsym Up    resize shrink height 5 px or 5 ppt
  bindsym Right resize grow width 5 px or 5 ppt
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+Ctrl+r mode "resize"

# Workspaces
set $ws1 1:
set $ws2 2:
set $ws3 3:
set $ws4 4:
set $ws5 5:
set $ws6 6:
set $ws7 7:
set $ws8 8:

bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8

bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8

# Media / brightness
bindsym XF86AudioRaiseVolume exec --no-startup-id wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindsym XF86AudioLowerVolume exec --no-startup-id wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindsym XF86AudioMute        exec --no-startup-id wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindsym XF86AudioMicMute     exec --no-startup-id wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindsym XF86MonBrightnessUp   exec --no-startup-id brightnessctl set +10%
bindsym XF86MonBrightnessDown exec --no-startup-id brightnessctl set 10%-

# Screenshots
bindsym Print exec scrot '%Y-%m-%d_%H-%M-%S.png' -e 'mkdir -p ~/Pictures/Screenshots && mv $f ~/Pictures/Screenshots/'
bindsym Shift+Print exec scrot -s '%Y-%m-%d_%H-%M-%S.png' -e 'mkdir -p ~/Pictures/Screenshots && mv $f ~/Pictures/Screenshots/'

##############################################################################
### Handheld ergonomic bindings (uConsole)
# Assumes: set $mod Mod1 (Alt). Uses Alt+Ctrl combos (2-key chord on uConsole).
##############################################################################

# Ergonomic window move (alternative to Shift+hjkl / arrows)
bindsym $mod+Ctrl+h move left
bindsym $mod+Ctrl+j move down
bindsym $mod+Ctrl+k move up
bindsym $mod+Ctrl+l move right

# One-tap kill (keeps Backspace kill too)
bindsym $mod+q kill

# ROS2 / Docker QoL (compose classic, since docker-compose is installed)
bindsym $mod+Ctrl+Return exec --no-startup-id kitty --class ros2 -e bash -lc "docker exec -it ros2 bash"
bindsym $mod+Ctrl+u exec --no-startup-id bash -lc "docker-compose -f ~/docker-compose.ros2.yml up -d"
bindsym $mod+Ctrl+x exec --no-startup-id bash -lc "docker-compose -f ~/docker-compose.ros2.yml down"
bindsym $mod+Ctrl+o exec --no-startup-id kitty --class ros2logs -e bash -lc "docker logs -f ros2 || read -p \"Press Enter to close…\""

# Launch your welcome pair (neofetch + pipes)
bindsym $mod+Ctrl+p exec --no-startup-id ~/.local/bin/uconsole-startup.sh

# Direct resize nudges (keep your existing resize mode too)
bindsym $mod+Ctrl+Shift+h resize shrink width 5 px or 5 ppt
bindsym $mod+Ctrl+Shift+j resize grow height 5 px or 5 ppt
bindsym $mod+Ctrl+Shift+k resize shrink height 5 px or 5 ppt
bindsym $mod+Ctrl+Shift+l resize grow width 5 px or 5 ppt

# Handy handheld screenshot (region)
bindsym $mod+Ctrl+s exec --no-startup-id scrot -s "%Y-%m-%d_%H-%M-%S.png" -e "mkdir -p ~/Pictures/Screenshots && mv \$f ~/Pictures/Screenshots/"

##############################################################################

# Bar + Dracula colors
#bar {
#    status_command i3status -c ~/.config/i3status/config
#  position top
#  tray_output primary
#
#  colors {
#    background #282a36
#    statusline #f8f8f2
#    separator  #6272a4
#
#    focused_workspace  #44475a #44475a #f8f8f2
#    active_workspace   #343746 #343746 #f8f8f2
#    inactive_workspace #282a36 #282a36 #6272a4
#    urgent_workspace   #ff5555 #ff5555 #282a36
#    binding_mode       #bd93f9 #bd93f9 #282a36
#  }
#}

# Window borders (Dracula)
client.focused          #44475a #44475a #282a36 #f8f8f2 #44475a
client.focused_inactive #343746 #343746 #282a36 #f8f8f2 #343746
client.unfocused        #282a36 #282a36 #282a36 #6272a4 #282a36
client.urgent           #ff5555 #ff5555 #282a36 #f8f8f2 #ff5555
client.placeholder      #282a36 #282a36 #282a36 #f8f8f2 #282a36

# --- Start compositor safely ---
exec_always --no-startup-id ~/.local/bin/start-picom-safe.sh

# --- Autostart: neofetch (left) + pipes (right) ---
exec_always --no-startup-id ~/.local/bin/uconsole-startup.sh

# --- Polybar ---
exec_always --no-startup-id polybar main --config=$HOME/.config/polybar/config.ini

